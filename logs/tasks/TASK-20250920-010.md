# TASK-20250920-010 â€” Phase 8 security & reliability hardening

## Summary
Implemented rate limiting for export endpoints, added security headers, and documented the default safety posture while noting the secured operating environment.

## Steps Performed
1. Added an in-memory rate limiter utility and enforced per-user throttles on CSV and PDF export routes with structured logging (`lib/rate-limit.ts`, `app/api/transactions/export/route.ts`, `app/api/statements/pdf/route.ts`).
2. Strengthened Next.js security headers (CSP, HSTS, frame options, permissions policy) via `next.config.mjs`.
3. Updated README and Appwrite docs to capture new feature flag behavior and rate-limit defaults; reiterated in AGENTS.md that secrets are handled in a secured tenant.

## Notes & Issues
- The in-memory limiter is sufficient for current scale; if we deploy to multiple instances, consider moving to Redis/Upstash for consistency.
- CSP currently allows inline scripts/styles for existing components; revisit once the UI is audited for inline usage.

## Lessons Learned
- Centralized logging around export routes gives quick insight into usage and rate-limit breaches without additional tooling.

## Related Files
- `lib/rate-limit.ts`
- `app/api/transactions/export/route.ts`
- `app/api/statements/pdf/route.ts`
- `next.config.mjs`
- `README.md`
- `docs/appwrite-cloud-setup.md`
- `AGENTS.md`
