# TASK-20250920-009 — Feature flags for Plaid & Dwolla

## Summary
Added environment-driven feature flags that allow deployments to disable Plaid bank linking and Dwolla transfers without code changes, while keeping manual transaction flows operational.

## Steps Performed
1. Created `lib/feature-flags.ts` to parse `NEXT_PUBLIC_ENABLE_PLAID` and `NEXT_PUBLIC_ENABLE_TRANSFERS`, updating `.env` examples and docs accordingly.
2. Gated Plaid UI elements (sidebar link, post-sign-up linking) and provided a fallback message when Plaid is disabled (`components/PlaidLink.tsx`, `components/Sidebar.tsx`).
3. Added Dwolla feature gating, replacing the transfer page with a helpful notice when transfers are disabled (`app/(root)/payment-transfer/page.tsx`).
4. Implemented Plaid-disabled fallbacks in bank server actions to avoid unnecessary API calls and rely on stored manual data (`lib/actions/bank.actions.ts`).

## Notes & Issues
- Manual accounts created without Plaid now display as "Manual Account XXXX" with zero balances; consider enhancing with editable metadata later.
- Feature flags rely on `NEXT_PUBLIC_*` environment variables—ensure they’re set at deploy time to avoid defaulting to enabled.

## Lessons Learned
- Centralized flag parsing keeps both server and client components in sync and simplifies documentation.
- Providing UI messaging when features are disabled helps guide operators and end users without exposing raw configuration details.

## Related Files
- `lib/feature-flags.ts`
- `components/PlaidLink.tsx`
- `components/Sidebar.tsx`
- `app/(root)/payment-transfer/page.tsx`
- `lib/actions/bank.actions.ts`
- `.env.example`
- `README.md`
