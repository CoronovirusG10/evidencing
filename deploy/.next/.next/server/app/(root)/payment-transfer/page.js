(()=>{var e={};e.id=238,e.ids=[238],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},31438:e=>{"use strict";e.exports=require("node-appwrite")},27790:e=>{"use strict";e.exports=require("assert")},61212:e=>{"use strict";e.exports=require("async_hooks")},61282:e=>{"use strict";e.exports=require("child_process")},84770:e=>{"use strict";e.exports=require("crypto")},27920:e=>{"use strict";e.exports=require("diagnostics_channel")},82266:e=>{"use strict";e.exports=require("domain")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},66302:e=>{"use strict";e.exports=require("inspector")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},68621:e=>{"use strict";e.exports=require("punycode")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},16359:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>b,generateImageMetadata:()=>f,generateMetadata:()=>p,generateViewport:()=>h}),r(19020);var s=r(23808),a=r(87394),n=r(35247),l=r(54580),i=r(20830),o=r(82811);let c=(0,r(85418).createProxy)(String.raw`/Users/kaveh/Horizon-bank/banking/components/PaymentTransferForm.tsx#default`);var d=r(5017),m=r(22470),u=r(35978),x=r(51066);r(72077);let p=void 0,f=void 0,h=void 0,b=new Proxy(async()=>{let e=await (0,m.getLoggedInUser)();if(!(0,u.H_)())return(0,i.jsxs)("section",{className:"payment-transfer",children:[(0,i.jsx)(o.Z,{title:"Transfers Unavailable",subtext:"Automated transfers are disabled for this environment."}),(0,i.jsxs)("div",{className:"mt-6 rounded-2xl bg-white p-6 text-sm text-gray-600 shadow-subtle",children:[(0,i.jsx)("p",{children:"Dwolla-powered transfers are currently turned off. You can still track movement by recording manual transactions from the dashboard or statements page."}),(0,i.jsxs)("p",{className:"mt-4",children:["Need to enable transfers? Update the ",(0,i.jsx)("code",{children:"NEXT_PUBLIC_ENABLE_TRANSFERS"})," flag and redeploy. Manual entries remain available under the"," ",(0,i.jsx)(x.default,{className:"font-semibold text-brand-700",href:"/",children:"dashboard"})," ","and"," ",(0,i.jsx)(x.default,{className:"font-semibold text-brand-700",href:"/statements",children:"statements"})," ","experiences."]})]})]});let t=await (0,d.getAccounts)({userId:e.$id});if(!t)return null;let r=t?.data;return(0,i.jsxs)("section",{className:"payment-transfer",children:[(0,i.jsx)(o.Z,{title:"Payment Transfer",subtext:"Please provide any specific details or notes related to the payment transfer"}),(0,i.jsx)("section",{className:"size-full pt-5",children:(0,i.jsx)(c,{accounts:r})})]})},{apply:(e,t,r)=>{let i,o,c;try{let e=l.requestAsyncStorage.getStore();i=(0,s.h)((0,a.x)([e,"optionalAccess",e=>e.headers,"access",e=>e.get,"call",e=>e("sentry-trace")]),()=>void 0),o=(0,s.h)((0,a.x)([e,"optionalAccess",e=>e.headers,"access",e=>e.get,"call",e=>e("baggage")]),()=>void 0),c=(0,a.x)([e,"optionalAccess",e=>e.headers])}catch(e){}return n.D(e,{componentRoute:"/(root)/payment-transfer",componentType:"Page",sentryTraceHeader:i,baggageHeader:o,headers:c}).apply(t,r)}})},67243:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.Z,__next_app__:()=>m,originalPathname:()=>d,pages:()=>c,routeModule:()=>u,tree:()=>o}),r(16359),r(83017),r(22760),r(63835);var s=r(24636),a=r(7773),n=r(86864),l=r(46934),i={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>l[e]);r.d(t,i);let o=["",{children:["(root)",{children:["payment-transfer",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,16359)),"/Users/kaveh/Horizon-bank/banking/app/(root)/payment-transfer/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,83017)),"/Users/kaveh/Horizon-bank/banking/app/(root)/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,22760,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,63835)),"/Users/kaveh/Horizon-bank/banking/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,22760,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/kaveh/Horizon-bank/banking/app/(root)/payment-transfer/page.tsx"],d="/(root)/payment-transfer/page",m={require:r,loadChunk:()=>Promise.resolve()},u=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(root)/payment-transfer/page",pathname:"/payment-transfer",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},38062:(e,t,r)=>{Promise.resolve().then(r.bind(r,53484)),Promise.resolve().then(r.t.bind(r,92949,23))},53484:(e,t,r)=>{"use strict";r.d(t,{default:()=>w});var s=r(40612),a=r(51146),n=r(79668),l=r(20297),i=r(50030),o=r(21494),c=r(18467);r(13455);var d=r(26039);(0,d.$)("e1f4143a5fe2ddcaf6150630c4a5ba0af1233862"),(0,d.$)("35dd761518f51a48793356df9624b0555588fe79"),(0,d.$)("5a7e265742824c6cf1530dd0cbb7db95cb8f4531"),(0,d.$)("6ab4aec36ca7aace9c1fbdc7f7bd6d156ddb7759");var m=(0,d.$)("2cabda13407f7759054f6583a0cd05619a68c46b"),u=r(87896),x=r(43776),p=r(38371),f=r(25152),h=r(12043);let b=({accounts:e=[],setValue:t,otherStyles:r})=>{let a=(0,l.useSearchParams)(),n=(0,l.useRouter)(),[o,c]=(0,i.useState)(e[0]),d=r=>{c(e.find(e=>e.appwriteItemId===r));let s=(0,p.Yz)({params:a.toString(),key:"id",value:r});n.push(s,{scroll:!1}),t&&t("senderBank",r)};return(0,s.jsxs)(h.Ph,{defaultValue:o.id,onValueChange:e=>d(e),children:[(0,s.jsxs)(h.i4,{className:`flex w-full bg-white gap-3 md:w-[300px] ${r}`,children:[s.jsx(f.default,{src:"icons/credit-card.svg",width:20,height:20,alt:"account"}),s.jsx("p",{className:"line-clamp-1 w-full text-left",children:o.name})]}),s.jsx(h.Bw,{className:`w-full bg-white md:w-[300px] ${r}`,align:"end",children:(0,s.jsxs)(h.DI,{children:[s.jsx(h.n5,{className:"py-2 font-normal text-gray-500",children:"Select a bank to display"}),e.map(e=>s.jsx(h.Ql,{value:e.appwriteItemId,className:"cursor-pointer border-t",children:(0,s.jsxs)("div",{className:"flex flex-col ",children:[s.jsx("p",{className:"text-16 font-medium",children:e.name}),s.jsx("p",{className:"text-14 font-medium text-blue-600",children:(0,p.dN)(e.currentBalance)})]})},e.id))]})})]})};var j=r(35326),g=r(5498),y=r(82594),N=r(48225);let v=c.Ry({email:c.Z_().email("Invalid email address"),name:c.Z_().min(4,"Transfer note is too short"),amount:c.Z_().min(4,"Amount is too short"),senderBank:c.Z_().min(4,"Please select a valid bank account"),sharableId:c.Z_().min(8,"Please select a valid sharable Id")}),w=({accounts:e})=>{let t=(0,l.useRouter)(),[r,c]=(0,i.useState)(!1),d=(0,o.cI)({resolver:(0,a.F)(v),defaultValues:{name:"",email:"",amount:"",senderBank:"",sharableId:""}}),f=async e=>{c(!0);try{let r=(0,p.T$)(e.sharableId),s=await (0,x.XD)({accountId:r}),a=await (0,x.cM)({documentId:e.senderBank}),n={sourceFundingSourceUrl:a.fundingSourceUrl,destinationFundingSourceUrl:s.fundingSourceUrl,amount:e.amount};if(await m(n)){let r="string"==typeof a.userId?a.userId:a.userId?.$id,n="string"==typeof s.userId?s.userId:s.userId?.$id,l={name:e.name,amount:e.amount,senderId:r,senderBankId:a.$id,receiverId:n,receiverBankId:s.$id,email:e.email,bankId:a.$id,userId:r,source:"transfer",direction:"debit",category:"Transfer",date:new Date().toISOString()};await (0,u._X)(l)&&(d.reset(),t.push("/"))}}catch(e){console.error("Submitting create transfer request failed: ",e)}c(!1)};return s.jsx(g.l0,{...d,children:(0,s.jsxs)("form",{onSubmit:d.handleSubmit(f),className:"flex flex-col",children:[s.jsx(g.Wi,{control:d.control,name:"senderBank",render:()=>s.jsx(g.xJ,{className:"border-t border-gray-200",children:(0,s.jsxs)("div",{className:"payment-transfer_form-item pb-6 pt-5",children:[(0,s.jsxs)("div",{className:"payment-transfer_form-content",children:[s.jsx(g.lX,{className:"text-14 font-medium text-gray-700",children:"Select Source Bank"}),s.jsx(g.pf,{className:"text-12 font-normal text-gray-600",children:"Select the bank account you want to transfer funds from"})]}),(0,s.jsxs)("div",{className:"flex w-full flex-col",children:[s.jsx(g.NI,{children:s.jsx(b,{accounts:e,setValue:d.setValue,otherStyles:"!w-full"})}),s.jsx(g.zG,{className:"text-12 text-red-500"})]})]})})}),s.jsx(g.Wi,{control:d.control,name:"name",render:({field:e})=>s.jsx(g.xJ,{className:"border-t border-gray-200",children:(0,s.jsxs)("div",{className:"payment-transfer_form-item pb-6 pt-5",children:[(0,s.jsxs)("div",{className:"payment-transfer_form-content",children:[s.jsx(g.lX,{className:"text-14 font-medium text-gray-700",children:"Transfer Note (Optional)"}),s.jsx(g.pf,{className:"text-12 font-normal text-gray-600",children:"Please provide any additional information or instructions related to the transfer"})]}),(0,s.jsxs)("div",{className:"flex w-full flex-col",children:[s.jsx(g.NI,{children:s.jsx(N.g,{placeholder:"Write a short note here",className:"input-class",...e})}),s.jsx(g.zG,{className:"text-12 text-red-500"})]})]})})}),(0,s.jsxs)("div",{className:"payment-transfer_form-details",children:[s.jsx("h2",{className:"text-18 font-semibold text-gray-900",children:"Bank account details"}),s.jsx("p",{className:"text-16 font-normal text-gray-600",children:"Enter the bank account details of the recipient"})]}),s.jsx(g.Wi,{control:d.control,name:"email",render:({field:e})=>s.jsx(g.xJ,{className:"border-t border-gray-200",children:(0,s.jsxs)("div",{className:"payment-transfer_form-item py-5",children:[s.jsx(g.lX,{className:"text-14 w-full max-w-[280px] font-medium text-gray-700",children:"Recipient's Email Address"}),(0,s.jsxs)("div",{className:"flex w-full flex-col",children:[s.jsx(g.NI,{children:s.jsx(y.I,{placeholder:"ex: johndoe@gmail.com",className:"input-class",...e})}),s.jsx(g.zG,{className:"text-12 text-red-500"})]})]})})}),s.jsx(g.Wi,{control:d.control,name:"sharableId",render:({field:e})=>s.jsx(g.xJ,{className:"border-t border-gray-200",children:(0,s.jsxs)("div",{className:"payment-transfer_form-item pb-5 pt-6",children:[s.jsx(g.lX,{className:"text-14 w-full max-w-[280px] font-medium text-gray-700",children:"Receiver's Plaid Sharable Id"}),(0,s.jsxs)("div",{className:"flex w-full flex-col",children:[s.jsx(g.NI,{children:s.jsx(y.I,{placeholder:"Enter the public account number",className:"input-class",...e})}),s.jsx(g.zG,{className:"text-12 text-red-500"})]})]})})}),s.jsx(g.Wi,{control:d.control,name:"amount",render:({field:e})=>s.jsx(g.xJ,{className:"border-y border-gray-200",children:(0,s.jsxs)("div",{className:"payment-transfer_form-item py-5",children:[s.jsx(g.lX,{className:"text-14 w-full max-w-[280px] font-medium text-gray-700",children:"Amount"}),(0,s.jsxs)("div",{className:"flex w-full flex-col",children:[s.jsx(g.NI,{children:s.jsx(y.I,{placeholder:"ex: 5.00",className:"input-class",...e})}),s.jsx(g.zG,{className:"text-12 text-red-500"})]})]})})}),s.jsx("div",{className:"payment-transfer_btn-box",children:s.jsx(j.z,{type:"submit",className:"payment-transfer_btn",children:r?(0,s.jsxs)(s.Fragment,{children:[s.jsx(n.Z,{size:20,className:"animate-spin"})," \xa0 Sending..."]}):"Transfer Funds"})})]})})}},51066:(e,t,r)=>{"use strict";r.d(t,{default:()=>a.a});var s=r(62909),a=r.n(s)},62909:(e,t,r)=>{"use strict";let{createProxy:s}=r(85418);e.exports=s("/Users/kaveh/Horizon-bank/banking/node_modules/next/dist/client/link.js")}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[50,415,403,640,175,711,473,593,564,17,936],()=>r(67243));module.exports=s})();
//# sourceMappingURL=page.js.map