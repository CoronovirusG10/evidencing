{"version":3,"file":"../app/api/statements/pdf/route.js","mappings":"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","sources":["webpack://jsm_banking/external commonjs \"next/dist/client/components/action-async-storage.external.js\"","webpack://jsm_banking/external commonjs \"next/dist/client/components/request-async-storage.external.js\"","webpack://jsm_banking/external commonjs \"next/dist/client/components/static-generation-async-storage.external.js\"","webpack://jsm_banking/external commonjs \"next/dist/compiled/next-server/app-page.runtime.prod.js\"","webpack://jsm_banking/external commonjs \"next/dist/compiled/next-server/app-route.runtime.prod.js\"","webpack://jsm_banking/external commonjs \"node-appwrite\"","webpack://jsm_banking/external commonjs2 \"assert\"","webpack://jsm_banking/external commonjs2 \"async_hooks\"","webpack://jsm_banking/external commonjs2 \"child_process\"","webpack://jsm_banking/external commonjs2 \"crypto\"","webpack://jsm_banking/external commonjs2 \"diagnostics_channel\"","webpack://jsm_banking/external commonjs2 \"domain\"","webpack://jsm_banking/external commonjs2 \"events\"","webpack://jsm_banking/external commonjs2 \"fs\"","webpack://jsm_banking/external commonjs2 \"http\"","webpack://jsm_banking/external commonjs2 \"https\"","webpack://jsm_banking/external commonjs2 \"inspector\"","webpack://jsm_banking/external commonjs2 \"net\"","webpack://jsm_banking/external commonjs2 \"os\"","webpack://jsm_banking/external commonjs2 \"path\"","webpack://jsm_banking/external commonjs2 \"punycode\"","webpack://jsm_banking/external commonjs2 \"stream\"","webpack://jsm_banking/external commonjs2 \"tls\"","webpack://jsm_banking/external commonjs2 \"tty\"","webpack://jsm_banking/external commonjs2 \"url\"","webpack://jsm_banking/external commonjs2 \"util\"","webpack://jsm_banking/external commonjs2 \"zlib\"","webpack://jsm_banking/./lib/pdf.ts","webpack://jsm_banking/app/api/statements/pdf/route.ts","webpack://jsm_banking/sentry-wrapper-module","webpack://jsm_banking/?a207","webpack://jsm_banking/./lib/rate-limit.ts","webpack://jsm_banking/./lib/transactions/index.ts","webpack://jsm_banking/./node_modules/next/dist/server/future/route-modules/app-page/vendored/rsc/react-dom.js","webpack://jsm_banking/./node_modules/next/dist/server/future/route-modules/app-page/vendored/rsc/react-server-dom-webpack-server-edge.js"],"sourcesContent":["module.exports = require(\"next/dist/client/components/action-async-storage.external.js\");","module.exports = require(\"next/dist/client/components/request-async-storage.external.js\");","module.exports = require(\"next/dist/client/components/static-generation-async-storage.external.js\");","module.exports = require(\"next/dist/compiled/next-server/app-page.runtime.prod.js\");","module.exports = require(\"next/dist/compiled/next-server/app-route.runtime.prod.js\");","module.exports = require(\"node-appwrite\");","module.exports = require(\"assert\");","module.exports = require(\"async_hooks\");","module.exports = require(\"child_process\");","module.exports = require(\"crypto\");","module.exports = require(\"diagnostics_channel\");","module.exports = require(\"domain\");","module.exports = require(\"events\");","module.exports = require(\"fs\");","module.exports = require(\"http\");","module.exports = require(\"https\");","module.exports = require(\"inspector\");","module.exports = require(\"net\");","module.exports = require(\"os\");","module.exports = require(\"path\");","module.exports = require(\"punycode\");","module.exports = require(\"stream\");","module.exports = require(\"tls\");","module.exports = require(\"tty\");","module.exports = require(\"url\");","module.exports = require(\"util\");","module.exports = require(\"zlib\");","const escapePdfText = (value: string) => {\n  return value.replace(/\\\\/g, '\\\\\\\\').replace(/\\(/g, '\\\\(').replace(/\\)/g, '\\\\)');\n};\n\nclass PdfBuilder {\n  private objects: string[] = [''];\n\n  reserve() {\n    this.objects.push('');\n    return this.objects.length - 1;\n  }\n\n  add(body: string) {\n    this.objects.push(body);\n    return this.objects.length - 1;\n  }\n\n  set(id: number, body: string) {\n    this.objects[id] = body;\n  }\n\n  build(rootId: number) {\n    const header = '%PDF-1.4\\n';\n    const chunks: string[] = [header];\n    const offsets: number[] = [0];\n    let offset = Buffer.byteLength(header, 'utf8');\n\n    for (let i = 1; i < this.objects.length; i += 1) {\n      offsets[i] = offset;\n      const body = `${i} 0 obj\\n${this.objects[i]}\\nendobj\\n`;\n      chunks.push(body);\n      offset += Buffer.byteLength(body, 'utf8');\n    }\n\n    const xrefOffset = offset;\n    const totalObjects = this.objects.length - 1;\n    const xrefEntries = ['xref', `0 ${totalObjects + 1}`, '0000000000 65535 f '];\n\n    for (let i = 1; i <= totalObjects; i += 1) {\n      xrefEntries.push(`${offsets[i].toString().padStart(10, '0')} 00000 n `);\n    }\n\n    const xref = `${xrefEntries.join('\\n')}\\n`;\n    const trailer = `trailer\\n<< /Size ${totalObjects + 1} /Root ${rootId} 0 R >>\\nstartxref\\n${xrefOffset}\\n%%EOF`;\n\n    chunks.push(xref, trailer);\n\n    return Buffer.from(chunks.join(''));\n  }\n}\n\nconst createPageStream = (lines: string[]) => {\n  const top = 800;\n  const lineHeight = 16;\n  let stream = 'BT\\n/F1 12 Tf\\n';\n\n  lines.forEach((line, index) => {\n    const y = top - index * lineHeight;\n    stream += `1 0 0 1 50 ${y} Tm (${escapePdfText(line)}) Tj\\n`;\n  });\n\n  stream += 'ET';\n  return stream;\n};\n\nconst chunkLines = (lines: string[], chunkSize: number) => {\n  const chunks: string[][] = [];\n  for (let i = 0; i < lines.length; i += chunkSize) {\n    chunks.push(lines.slice(i, i + chunkSize));\n  }\n  return chunks;\n};\n\nexport type StatementPdfOptions = {\n  lines: string[];\n};\n\nexport const generateStatementPdf = ({ lines }: StatementPdfOptions) => {\n  const builder = new PdfBuilder();\n  const catalogId = builder.reserve();\n  const pagesId = builder.reserve();\n  const fontId = builder.add('<< /Type /Font /Subtype /Type1 /BaseFont /Helvetica >>');\n\n  const lineChunks = chunkLines(lines.length ? lines : ['No transactions for this statement period.'], 44);\n\n  const pageIds: number[] = [];\n  const contentIds: number[] = [];\n\n  lineChunks.forEach((chunk) => {\n    const stream = createPageStream(chunk);\n    const streamBody = `<< /Length ${Buffer.byteLength(stream, 'utf8')} >>\\nstream\\n${stream}\\nendstream`;\n    const contentId = builder.add(streamBody);\n    const pageId = builder.reserve();\n    pageIds.push(pageId);\n    contentIds.push(contentId);\n  });\n\n  pageIds.forEach((pageId, index) => {\n    const contentId = contentIds[index];\n    const pageBody = [\n      '<<',\n      '/Type /Page',\n      `/Parent ${pagesId} 0 R`,\n      '/MediaBox [0 0 595 842]',\n      `/Resources << /Font << /F1 ${fontId} 0 R >> >>`,\n      `/Contents ${contentId} 0 R`,\n      '>>',\n    ].join(' ');\n\n    builder.set(pageId, pageBody);\n  });\n\n  const kids = pageIds.map((id) => `${id} 0 R`).join(' ');\n  builder.set(pagesId, `<< /Type /Pages /Kids [${kids}] /Count ${pageIds.length} >>`);\n  builder.set(catalogId, `<< /Type /Catalog /Pages ${pagesId} 0 R >>`);\n\n  return builder.build(catalogId);\n};\n","import { NextRequest, NextResponse } from 'next/server';\n\nimport { getAccount } from '@/lib/actions/bank.actions';\nimport { getBank, getLoggedInUser } from '@/lib/actions/user.actions';\nimport { generateStatementPdf } from '@/lib/pdf';\nimport { consumeRateLimit } from '@/lib/rate-limit';\nimport { buildStatementLines, computeStatementSummary, filterTransactions } from '@/lib/transactions';\n\nexport async function GET(request: NextRequest) {\n  const url = new URL(request.url);\n  const bankId = url.searchParams.get('bankId');\n  const from = url.searchParams.get('from');\n  const to = url.searchParams.get('to');\n  const directionParam = url.searchParams.get('direction') as\n    | 'credit'\n    | 'debit'\n    | 'all'\n    | null;\n\n  if (!bankId || !from || !to) {\n    return NextResponse.json({ error: 'bankId, from, and to parameters are required' }, { status: 400 });\n  }\n\n  const user = await getLoggedInUser();\n  if (!user) {\n    return NextResponse.json({ error: 'Unauthorized' }, { status: 401 });\n  }\n\n  const bank = await getBank({ documentId: bankId });\n  if (!bank) {\n    return NextResponse.json({ error: 'Bank not found' }, { status: 404 });\n  }\n\n  const ownerId = typeof bank.userId === 'string' ? bank.userId : bank.userId?.$id;\n  if (ownerId !== user.$id) {\n    return NextResponse.json({ error: 'Forbidden' }, { status: 403 });\n  }\n\n  const account = await getAccount({ appwriteItemId: bankId });\n  const transactions = account?.transactions || [];\n\n  const rateKey = `${user.$id}:statement:${bankId}`;\n  const rate = consumeRateLimit(rateKey, { limit: 5, window: 60_000 });\n\n  if (!rate.success) {\n    console.warn('[api/statements/pdf] rate limit exceeded', {\n      userId: user.$id,\n      bankId,\n      reset: rate.reset,\n    });\n\n    return NextResponse.json(\n      { error: 'Too many statement requests. Please try again shortly.' },\n      {\n        status: 429,\n        headers: {\n          'Retry-After': Math.max(Math.ceil((rate.reset - Date.now()) / 1000), 1).toString(),\n        },\n      }\n    );\n  }\n\n  const filteredTransactions = filterTransactions(transactions, {\n    from,\n    to,\n    direction: directionParam || 'all',\n  });\n\n  const summary = computeStatementSummary(filteredTransactions, account?.data?.currentBalance || 0);\n\n  const lines = buildStatementLines(filteredTransactions, summary, {\n    accountName: account?.data?.name || bankId,\n    officialName: account?.data?.officialName,\n    period: { from, to },\n    direction: directionParam || 'all',\n  });\n\n  const pdfBuffer = generateStatementPdf({ lines });\n\n  const filenameParts = [\n    (account?.data?.name || 'statement').toLowerCase().replace(/[^a-z0-9]+/g, '-'),\n    from,\n    to,\n  ];\n\n  if (directionParam && directionParam !== 'all') {\n    filenameParts.push(directionParam);\n  }\n\n  const filename = `${filenameParts.filter(Boolean).join('-')}.pdf`;\n\n  console.info('[api/statements/pdf] generated statement', {\n    userId: user.$id,\n    bankId,\n    from,\n    to,\n    remaining: rate.remaining,\n  });\n\n  return new NextResponse(pdfBuffer, {\n    headers: {\n      'Content-Type': 'application/pdf',\n      'Content-Disposition': `attachment; filename=\"${filename}\"`,\n      'Cache-Control': 'no-store',\n    },\n  });\n}\n","import { _nullishCoalesce, _optionalChain } from '@sentry/utils';\nimport * as Sentry from '@sentry/nextjs';\nimport { requestAsyncStorage } from 'next/dist/client/components/request-async-storage.external.js';\nimport * as serverComponentModule from '__SENTRY_WRAPPING_TARGET_FILE__.cjs';\nexport * from '__SENTRY_WRAPPING_TARGET_FILE__.cjs';\nexport {} from '__SENTRY_WRAPPING_TARGET_FILE__.cjs';\n\nfunction wrapHandler(handler, method) {\n  // Running the instrumentation code during the build phase will mark any function as \"dynamic\" because we're accessing\n  // the Request object. We do not want to turn handlers dynamic so we skip instrumentation in the build phase.\n  if (process.env.NEXT_PHASE === 'phase-production-build') {\n    return handler;\n  }\n\n  if (typeof handler !== 'function') {\n    return handler;\n  }\n\n  return new Proxy(handler, {\n    apply: (originalFunction, thisArg, args) => {\n      let sentryTraceHeader = undefined;\n      let baggageHeader = undefined;\n      let headers = undefined;\n\n      // We try-catch here just in case the API around `requestAsyncStorage` changes unexpectedly since it is not public API\n      try {\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n        const requestAsyncStore = requestAsyncStorage.getStore() ;\n        sentryTraceHeader = _nullishCoalesce(_optionalChain([requestAsyncStore, 'optionalAccess', _ => _.headers, 'access', _2 => _2.get, 'call', _3 => _3('sentry-trace')]), () => ( undefined));\n        baggageHeader = _nullishCoalesce(_optionalChain([requestAsyncStore, 'optionalAccess', _4 => _4.headers, 'access', _5 => _5.get, 'call', _6 => _6('baggage')]), () => ( undefined));\n        headers = _optionalChain([requestAsyncStore, 'optionalAccess', _7 => _7.headers]);\n      } catch (e) {\n        /** empty */\n      }\n\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access, @typescript-eslint/no-explicit-any\n      return Sentry.wrapRouteHandlerWithSentry(originalFunction , {\n        method,\n        parameterizedRoute: '/api/statements/pdf',\n        sentryTraceHeader,\n        baggageHeader,\n        headers,\n      }).apply(thisArg, args);\n    },\n  });\n}\n\n// eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\nconst GET = wrapHandler(serverComponentModule.GET , 'GET');\n// eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\nconst POST = wrapHandler(serverComponentModule.POST , 'POST');\n// eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\nconst PUT = wrapHandler(serverComponentModule.PUT , 'PUT');\n// eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\nconst PATCH = wrapHandler(serverComponentModule.PATCH , 'PATCH');\n// eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\nconst DELETE = wrapHandler(serverComponentModule.DELETE , 'DELETE');\n// eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\nconst HEAD = wrapHandler(serverComponentModule.HEAD , 'HEAD');\n// eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\nconst OPTIONS = wrapHandler(serverComponentModule.OPTIONS , 'OPTIONS');\n\nexport { DELETE, GET, HEAD, OPTIONS, PATCH, POST, PUT };\n","import { AppRouteRouteModule } from \"next/dist/server/future/route-modules/app-route/module.compiled\";\nimport { RouteKind } from \"next/dist/server/future/route-kind\";\nimport { patchFetch as _patchFetch } from \"next/dist/server/lib/patch-fetch\";\nimport * as userland from \"/Users/kaveh/Horizon-bank/banking/app/api/statements/pdf/route.ts\";\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"standalone\"\nconst routeModule = new AppRouteRouteModule({\n    definition: {\n        kind: RouteKind.APP_ROUTE,\n        page: \"/api/statements/pdf/route\",\n        pathname: \"/api/statements/pdf\",\n        filename: \"route\",\n        bundlePath: \"app/api/statements/pdf/route\"\n    },\n    resolvedPagePath: \"/Users/kaveh/Horizon-bank/banking/app/api/statements/pdf/route.ts\",\n    nextConfigOutput,\n    userland\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/statements/pdf/route\";\nfunction patchFetch() {\n    return _patchFetch({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\nexport { routeModule, requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, originalPathname, patchFetch,  };\n\n//# sourceMappingURL=app-route.js.map","export type RateLimitConfig = {\n  limit: number;\n  window: number; // ms\n};\n\nexport type RateLimitResult = {\n  success: boolean;\n  remaining: number;\n  reset: number;\n};\n\nconst DEFAULT_CONFIG: RateLimitConfig = {\n  limit: 5,\n  window: 60_000,\n};\n\ntype RateLimitState = {\n  count: number;\n  reset: number;\n};\n\nconst getStore = () => {\n  const globalStore = globalThis as typeof globalThis & {\n    __HORIZON_RATE_LIMIT__?: Map<string, RateLimitState>;\n  };\n\n  if (!globalStore.__HORIZON_RATE_LIMIT__) {\n    globalStore.__HORIZON_RATE_LIMIT__ = new Map();\n  }\n\n  return globalStore.__HORIZON_RATE_LIMIT__;\n};\n\nexport const consumeRateLimit = (\n  key: string,\n  config: RateLimitConfig = DEFAULT_CONFIG\n): RateLimitResult => {\n  const store = getStore();\n  const now = Date.now();\n  const existing = store.get(key);\n\n  if (existing && now < existing.reset) {\n    if (existing.count >= config.limit) {\n      return {\n        success: false,\n        remaining: 0,\n        reset: existing.reset,\n      };\n    }\n\n    const nextCount = existing.count + 1;\n    store.set(key, { count: nextCount, reset: existing.reset });\n    return {\n      success: true,\n      remaining: Math.max(config.limit - nextCount, 0),\n      reset: existing.reset,\n    };\n  }\n\n  const reset = now + config.window;\n  store.set(key, { count: 1, reset });\n  return {\n    success: true,\n    remaining: config.limit - 1,\n    reset,\n  };\n};\n","const formatDate = (value: string | Date) => {\n  const date = value instanceof Date ? value : new Date(value);\n  return date.toISOString().slice(0, 10);\n};\n\nexport type TransactionFilters = {\n  from?: string | null;\n  to?: string | null;\n  direction?: 'credit' | 'debit' | 'all' | null;\n};\n\nconst toDateOnly = (value: string | Date) => {\n  const date = value instanceof Date ? value : new Date(value);\n  return new Date(date.getFullYear(), date.getMonth(), date.getDate());\n};\n\nexport const filterTransactions = (\n  transactions: Transaction[],\n  filters: TransactionFilters\n): Transaction[] => {\n  if (!transactions?.length) return [];\n\n  const { from, to, direction } = filters;\n\n  const fromDate = from ? toDateOnly(from) : null;\n  const toDate = to ? toDateOnly(to) : null;\n  const normalizedDirection = direction && direction !== 'all' ? direction : null;\n\n  return transactions.filter((transaction) => {\n    const transactionDate = toDateOnly(transaction.date);\n\n    if (fromDate && transactionDate < fromDate) {\n      return false;\n    }\n\n    if (toDate && transactionDate > toDate) {\n      return false;\n    }\n\n    if (normalizedDirection) {\n      const txnDirection = transaction.direction || transaction.type;\n      if (txnDirection !== normalizedDirection) {\n        return false;\n      }\n    }\n\n    return true;\n  });\n};\n\nexport const computeStatementSummary = (\n  transactions: Transaction[],\n  closingBalance: number\n) => {\n  const totalChange = transactions.reduce((sum, transaction) => sum + transaction.amount, 0);\n  const totalCredits = transactions\n    .filter((transaction) => transaction.amount > 0)\n    .reduce((sum, transaction) => sum + transaction.amount, 0);\n  const totalDebits = transactions\n    .filter((transaction) => transaction.amount < 0)\n    .reduce((sum, transaction) => sum + Math.abs(transaction.amount), 0);\n\n  const openingBalance = closingBalance - totalChange;\n\n  return {\n    totalCredits,\n    totalDebits,\n    netChange: totalChange,\n    openingBalance,\n    closingBalance,\n  };\n};\n\nconst escapeCsvValue = (value: string | number | null | undefined) => {\n  if (value === null || value === undefined) return '';\n\n  const stringValue = String(value);\n  if (/[\",\\n]/.test(stringValue)) {\n    return `\"${stringValue.replace(/\"/g, '\"\"')}\"`;\n  }\n\n  return stringValue;\n};\n\nexport const toCsv = (\n  transactions: Transaction[],\n  options: {\n    accountName: string;\n    bankId: string;\n    filters: TransactionFilters;\n  }\n) => {\n  const { accountName, bankId, filters } = options;\n  const headerLines = [\n    ['Account', accountName],\n    ['Bank ID', bankId],\n    ['From', filters.from ? formatDate(filters.from) : '—'],\n    ['To', filters.to ? formatDate(filters.to) : '—'],\n    ['Direction', filters.direction && filters.direction !== 'all' ? filters.direction : 'All'],\n    [],\n  ];\n\n  const columns = ['Date', 'Description', 'Amount', 'Direction', 'Category', 'Payment Channel', 'Source'];\n\n  const rows = transactions.map((transaction) => [\n    formatDate(transaction.date),\n    transaction.name,\n    transaction.amount.toFixed(2),\n    transaction.direction || transaction.type || '',\n    transaction.category || '',\n    transaction.paymentChannel || transaction.channel || '',\n    transaction.source || '',\n  ]);\n\n  const csvLines = [\n    ...headerLines.map((line) => line.map(escapeCsvValue).join(',')),\n    columns.join(','),\n    ...rows.map((row) => row.map(escapeCsvValue).join(',')),\n  ];\n\n  return csvLines.join('\\n');\n};\n\nexport const buildStatementLines = (\n  transactions: Transaction[],\n  summary: ReturnType<typeof computeStatementSummary>,\n  options: {\n    accountName: string;\n    officialName?: string;\n    period: { from: string; to: string };\n    direction?: string | null;\n  }\n) => {\n  const { accountName, officialName, period, direction } = options;\n\n  const lines: string[] = [];\n  lines.push(`Account: ${accountName}`);\n  if (officialName) {\n    lines.push(`Institution: ${officialName}`);\n  }\n  lines.push(`Statement Period: ${formatDate(period.from)} to ${formatDate(period.to)}`);\n  if (direction && direction !== 'all') {\n    lines.push(`Direction: ${direction}`);\n  }\n  lines.push(`Opening Balance: $${summary.openingBalance.toFixed(2)}`);\n  lines.push(`Closing Balance: $${summary.closingBalance.toFixed(2)}`);\n  lines.push(`Total Credits: $${summary.totalCredits.toFixed(2)}`);\n  lines.push(`Total Debits: $${summary.totalDebits.toFixed(2)}`);\n  lines.push('');\n  lines.push('Date | Description | Amount | Direction | Category');\n\n  transactions.forEach((transaction) => {\n    const formattedDate = formatDate(transaction.date);\n    const amount = transaction.amount.toFixed(2);\n    const direction = transaction.direction || transaction.type || '';\n    const category = transaction.category || '';\n    lines.push(\n      `${formattedDate} | ${transaction.name} | ${amount} | ${direction} | ${category}`\n    );\n  });\n\n  return lines;\n};\n","\"use strict\";\nmodule.exports = require(\"../../module.compiled\").vendored[\"react-rsc\"].ReactDOM;\n\n//# sourceMappingURL=react-dom.js.map","\"use strict\";\nmodule.exports = require(\"../../module.compiled\").vendored[\"react-rsc\"].ReactServerDOMWebpackServerEdge;\n\n//# sourceMappingURL=react-server-dom-webpack-server-edge.js.map"],"names":["module","exports","require","escapePdfText","value","replace","PdfBuilder","reserve","objects","push","length","add","body","set","id","build","rootId","header","chunks","offsets","offset","Buffer","byteLength","i","xrefOffset","totalObjects","xrefEntries","toString","padStart","xref","join","trailer","from","createPageStream","stream","lines","forEach","line","index","top","chunkLines","chunkSize","slice","generateStatementPdf","builder","catalogId","pagesId","fontId","lineChunks","pageIds","contentIds","chunk","streamBody","contentId","pageId","pageBody","kids","map","wrapHandler","handler","method","process","env","NEXT_PHASE","Proxy","apply","originalFunction","thisArg","args","sentryTraceHeader","baggageHeader","headers","requestAsyncStore","request_async_storage_external_js_","requestAsyncStorage","getStore","_nullishCoalesce","h","_optionalChain","x","_","_2","get","_3","undefined","_4","_5","_6","_7","e","wrapRouteHandlerWithSentry","z","parameterizedRoute","GET","request","url","URL","bankId","searchParams","to","directionParam","NextResponse","json","error","status","user","getLoggedInUser","bank","getBank","documentId","ownerId","userId","$id","account","getAccount","appwriteItemId","transactions","rateKey","rate","consumeRateLimit","limit","window","success","console","warn","reset","Math","max","ceil","Date","now","filteredTransactions","filterTransactions","direction","summary","computeStatementSummary","data","currentBalance","pdfBuffer","buildStatementLines","accountName","name","officialName","period","filenameParts","toLowerCase","filename","filter","Boolean","info","remaining","POST","serverComponentModule.POST","PUT","serverComponentModule.PUT","PATCH","serverComponentModule.PATCH","DELETE","serverComponentModule.DELETE","HEAD","serverComponentModule.HEAD","OPTIONS","serverComponentModule.OPTIONS","routeModule","module_compiled","AppRouteRouteModule","definition","kind","route_kind","APP_ROUTE","page","pathname","bundlePath","resolvedPagePath","nextConfigOutput","userland","route_namespaceObject","staticGenerationAsyncStorage","serverHooks","originalPathname","patchFetch","patch_fetch","DEFAULT_CONFIG","globalStore","globalThis","__HORIZON_RATE_LIMIT__","Map","key","config","store","existing","count","nextCount","formatDate","date","toISOString","toDateOnly","getFullYear","getMonth","getDate","filters","fromDate","toDate","normalizedDirection","transactionDate","transaction","txnDirection","type","closingBalance","totalChange","reduce","sum","amount","totalCredits","totalDebits","abs","netChange","openingBalance","escapeCsvValue","stringValue","String","test","toCsv","options","headerLines","rows","toFixed","category","paymentChannel","channel","source","csvLines","columns","row","formattedDate","__webpack_require__","vendored","ReactDOM","ReactServerDOMWebpackServerEdge"],"sourceRoot":""}