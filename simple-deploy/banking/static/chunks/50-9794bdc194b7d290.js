"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[50],{50:function(e,t,a){a.d(t,{ManualTransactionSheet:function(){return v}});var n=a(7437),s=a(2265),l=a(7119),r=a(3590),i=a(9501),o=a(9397),d=a(1817),c=a(9304),u=a(8642),x=a(5186),m=a(3647),h=a(6818),j=a(2869),f=a(181);let p=l.Ry({bankId:l.Z_().min(1,"Select a bank account"),name:l.Z_().min(2,"Enter a description"),amount:l.oQ.number().positive("Amount must be greater than 0"),direction:l.Km(["credit","debit"]),date:l.Z_().min(1,"Select a transaction date"),category:l.Z_().optional(),notes:l.Z_().max(280,"Notes must be under 280 characters").optional()}),g=["General","Dining","Travel","Housing","Utilities","Income","Transfer","Investment"],b=()=>new Date().toISOString().slice(0,10),v=e=>{let{accounts:t,defaultBankId:a}=e,[l,v]=(0,s.useState)(!1),[y,N]=(0,s.useState)(!1),[w,I]=(0,s.useState)(null),k=(0,s.useMemo)(()=>{var e,n;return null!==(n=null!=a?a:null===(e=t[0])||void 0===e?void 0:e.appwriteItemId)&&void 0!==n?n:""},[t,a]),C=(0,i.cI)({resolver:(0,r.F)(p),defaultValues:{bankId:k,direction:"debit",date:b(),name:"",amount:0,category:"General",notes:""}});(0,s.useEffect)(()=>{l&&a&&C.setValue("bankId",a)},[a,C,l]);let S=()=>{C.reset({bankId:k,direction:"debit",date:b(),name:"",amount:0,category:"General",notes:""}),I(null)},z=async e=>{N(!0),I(null);try{await (0,f.kP)({bankId:e.bankId,name:e.name,amount:e.amount,direction:e.direction,category:e.category,date:e.date,notes:e.notes}),S(),v(!1)}catch(e){console.error(e),I("Unable to save transaction. Please try again.")}finally{N(!1)}},G=0===t.length;return(0,n.jsxs)(c.yo,{open:l,onOpenChange:e=>{v(e),e&&S()},children:[(0,n.jsx)(c.aM,{asChild:!0,children:(0,n.jsxs)(j.z,{className:"flex items-center gap-2",disabled:G,variant:"outline",children:[(0,n.jsx)(o.Z,{className:"h-4 w-4"}),"Manual transaction"]})}),(0,n.jsxs)(c.ue,{className:"flex w-full flex-col gap-6 overflow-y-auto bg-white p-6 sm:max-w-lg",children:[(0,n.jsxs)(c.Tu,{className:"items-start text-left",children:[(0,n.jsx)(c.bC,{children:"Add manual transaction"}),(0,n.jsx)(c.Ei,{children:"Record manual credits or debits for the selected account. Saved entries immediately refresh your dashboard and history."})]}),(0,n.jsx)(u.l0,{...C,children:(0,n.jsxs)("form",{onSubmit:C.handleSubmit(z),className:"flex flex-1 flex-col gap-5",children:[(0,n.jsx)(u.Wi,{control:C.control,name:"bankId",render:e=>{let{field:a}=e;return(0,n.jsxs)(u.xJ,{children:[(0,n.jsx)(u.lX,{children:"Account"}),(0,n.jsx)(u.NI,{children:(0,n.jsxs)(m.Ph,{onValueChange:a.onChange,value:a.value,disabled:G,children:[(0,n.jsx)(m.i4,{children:(0,n.jsx)(m.ki,{placeholder:"Select account"})}),(0,n.jsx)(m.Bw,{children:t.map(e=>(0,n.jsxs)(m.Ql,{value:e.appwriteItemId,children:[e.name," • ",e.mask?"••••".concat(e.mask):e.appwriteItemId.slice(-4)]},e.appwriteItemId))})]})}),(0,n.jsx)(u.zG,{})]})}}),(0,n.jsx)(u.Wi,{control:C.control,name:"name",render:e=>{let{field:t}=e;return(0,n.jsxs)(u.xJ,{children:[(0,n.jsx)(u.lX,{children:"Description"}),(0,n.jsx)(u.NI,{children:(0,n.jsx)(x.I,{placeholder:"e.g. Office supplies",...t})}),(0,n.jsx)(u.zG,{})]})}}),(0,n.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[(0,n.jsx)(u.Wi,{control:C.control,name:"amount",render:e=>{var t,a,s;let{field:l}=e,r=null!==(s=null===(a=l.value)||void 0===a?void 0:null===(t=a.toString)||void 0===t?void 0:t.call(a))&&void 0!==s?s:"";return(0,n.jsxs)(u.xJ,{children:[(0,n.jsx)(u.lX,{children:"Amount (USD)"}),(0,n.jsx)(u.NI,{children:(0,n.jsx)(x.I,{type:"number",step:"0.01",min:"0",placeholder:"0.00",value:"0"===r?"":r,onChange:e=>l.onChange(e.target.value)})}),(0,n.jsx)(u.zG,{})]})}}),(0,n.jsx)(u.Wi,{control:C.control,name:"direction",render:e=>{let{field:t}=e;return(0,n.jsxs)(u.xJ,{children:[(0,n.jsx)(u.lX,{children:"Type"}),(0,n.jsx)(u.NI,{children:(0,n.jsxs)(m.Ph,{onValueChange:t.onChange,value:t.value,children:[(0,n.jsx)(m.i4,{children:(0,n.jsx)(m.ki,{})}),(0,n.jsxs)(m.Bw,{children:[(0,n.jsx)(m.Ql,{value:"debit",children:"Debit (money out)"}),(0,n.jsx)(m.Ql,{value:"credit",children:"Credit (money in)"})]})]})}),(0,n.jsx)(u.zG,{})]})}})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[(0,n.jsx)(u.Wi,{control:C.control,name:"date",render:e=>{let{field:t}=e;return(0,n.jsxs)(u.xJ,{children:[(0,n.jsx)(u.lX,{children:"Date"}),(0,n.jsx)(u.NI,{children:(0,n.jsx)(x.I,{type:"date",max:b(),...t})}),(0,n.jsx)(u.zG,{})]})}}),(0,n.jsx)(u.Wi,{control:C.control,name:"category",render:e=>{var t;let{field:a}=e;return(0,n.jsxs)(u.xJ,{children:[(0,n.jsx)(u.lX,{children:"Category"}),(0,n.jsx)(u.NI,{children:(0,n.jsxs)(m.Ph,{onValueChange:a.onChange,value:null!==(t=a.value)&&void 0!==t?t:"General",children:[(0,n.jsx)(m.i4,{children:(0,n.jsx)(m.ki,{})}),(0,n.jsx)(m.Bw,{children:g.map(e=>(0,n.jsx)(m.Ql,{value:e,children:e},e))})]})}),(0,n.jsx)(u.zG,{})]})}})]}),(0,n.jsx)(u.Wi,{control:C.control,name:"notes",render:e=>{let{field:t}=e;return(0,n.jsxs)(u.xJ,{children:[(0,n.jsx)(u.lX,{children:"Notes"}),(0,n.jsx)(u.NI,{children:(0,n.jsx)(h.g,{placeholder:"Optional memo...",className:"resize-none",...t})}),(0,n.jsx)(u.zG,{})]})}}),w&&(0,n.jsx)("p",{className:"text-sm text-red-500",role:"alert",children:w}),(0,n.jsxs)(c.FF,{className:"mt-auto flex w-full justify-end gap-3 sm:justify-between",children:[(0,n.jsx)(j.z,{type:"button",variant:"outline",onClick:()=>{S(),v(!1)},children:"Cancel"}),(0,n.jsx)(j.z,{type:"submit",disabled:y||G,children:y?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):"Save transaction"})]})]})})]})]})}},9304:function(e,t,a){a.d(t,{Ei:function(){return b},FF:function(){return p},Tu:function(){return f},aM:function(){return c},bC:function(){return g},sw:function(){return u},ue:function(){return j},yo:function(){return d}});var n=a(7437),s=a(2265),l=a(9027),r=a(535),i=a(2489),o=a(4508);let d=l.fC,c=l.xz,u=l.x8,x=l.h_,m=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)(l.aV,{className:(0,o.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...s,ref:t})});m.displayName=l.aV.displayName;let h=(0,r.j)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),j=s.forwardRef((e,t)=>{let{side:a="right",className:s,children:r,...d}=e;return(0,n.jsxs)(x,{children:[(0,n.jsx)(m,{}),(0,n.jsxs)(l.VY,{ref:t,className:(0,o.cn)(h({side:a}),s),...d,children:[r,(0,n.jsxs)(l.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,n.jsx)(i.Z,{className:"h-4 w-4"}),(0,n.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});j.displayName=l.VY.displayName;let f=e=>{let{className:t,...a}=e;return(0,n.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...a})};f.displayName="SheetHeader";let p=e=>{let{className:t,...a}=e;return(0,n.jsx)("div",{className:(0,o.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};p.displayName="SheetFooter";let g=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)(l.Dx,{ref:t,className:(0,o.cn)("text-lg font-semibold text-foreground",a),...s})});g.displayName=l.Dx.displayName;let b=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)(l.dk,{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",a),...s})});b.displayName=l.dk.displayName}}]);