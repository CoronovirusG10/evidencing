(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[238],{9181:function(e,a,t){Promise.resolve().then(t.bind(t,5547)),Promise.resolve().then(t.t.bind(t,2972,23))},5547:function(e,a,t){"use strict";t.d(a,{default:function(){return I}});var r=t(7437),n=t(3590),s=t(1817),l=t(9376),c=t(2265),d=t(9501),i=t(7119);t(3079);var o=t(2119);(0,o.$)("e1f4143a5fe2ddcaf6150630c4a5ba0af1233862"),(0,o.$)("35dd761518f51a48793356df9624b0555588fe79"),(0,o.$)("5a7e265742824c6cf1530dd0cbb7db95cb8f4531"),(0,o.$)("6ab4aec36ca7aace9c1fbdc7f7bd6d156ddb7759");var m=(0,o.$)("2cabda13407f7759054f6583a0cd05619a68c46b"),f=t(181),u=t(9869),x=t(4508),h=t(3145),b=t(3647);let j=e=>{let{accounts:a=[],setValue:t,otherStyles:n}=e,s=(0,l.useSearchParams)(),d=(0,l.useRouter)(),[i,o]=(0,c.useState)(a[0]),m=e=>{o(a.find(a=>a.appwriteItemId===e));let r=(0,x.Yz)({params:s.toString(),key:"id",value:e});d.push(r,{scroll:!1}),t&&t("senderBank",e)};return(0,r.jsxs)(b.Ph,{defaultValue:i.id,onValueChange:e=>m(e),children:[(0,r.jsxs)(b.i4,{className:"flex w-full bg-white gap-3 md:w-[300px] ".concat(n),children:[(0,r.jsx)(h.default,{src:"icons/credit-card.svg",width:20,height:20,alt:"account"}),(0,r.jsx)("p",{className:"line-clamp-1 w-full text-left",children:i.name})]}),(0,r.jsx)(b.Bw,{className:"w-full bg-white md:w-[300px] ".concat(n),align:"end",children:(0,r.jsxs)(b.DI,{children:[(0,r.jsx)(b.n5,{className:"py-2 font-normal text-gray-500",children:"Select a bank to display"}),a.map(e=>(0,r.jsx)(b.Ql,{value:e.appwriteItemId,className:"cursor-pointer border-t",children:(0,r.jsxs)("div",{className:"flex flex-col ",children:[(0,r.jsx)("p",{className:"text-16 font-medium",children:e.name}),(0,r.jsx)("p",{className:"text-14 font-medium text-blue-600",children:(0,x.dN)(e.currentBalance)})]})},e.id))]})})]})};var p=t(2869),N=t(8642),v=t(5186),g=t(6818);let y=i.Ry({email:i.Z_().email("Invalid email address"),name:i.Z_().min(4,"Transfer note is too short"),amount:i.Z_().min(4,"Amount is too short"),senderBank:i.Z_().min(4,"Please select a valid bank account"),sharableId:i.Z_().min(8,"Please select a valid sharable Id")});var I=e=>{let{accounts:a}=e,t=(0,l.useRouter)(),[i,o]=(0,c.useState)(!1),h=(0,d.cI)({resolver:(0,n.F)(y),defaultValues:{name:"",email:"",amount:"",senderBank:"",sharableId:""}}),b=async e=>{o(!0);try{let n=(0,x.T$)(e.sharableId),s=await (0,u.XD)({accountId:n}),l=await (0,u.cM)({documentId:e.senderBank}),c={sourceFundingSourceUrl:l.fundingSourceUrl,destinationFundingSourceUrl:s.fundingSourceUrl,amount:e.amount};if(await m(c)){var a,r;let n="string"==typeof l.userId?l.userId:null===(a=l.userId)||void 0===a?void 0:a.$id,c="string"==typeof s.userId?s.userId:null===(r=s.userId)||void 0===r?void 0:r.$id,d={name:e.name,amount:e.amount,senderId:n,senderBankId:l.$id,receiverId:c,receiverBankId:s.$id,email:e.email,bankId:l.$id,userId:n,source:"transfer",direction:"debit",category:"Transfer",date:new Date().toISOString()};await (0,f._X)(d)&&(h.reset(),t.push("/"))}}catch(e){console.error("Submitting create transfer request failed: ",e)}o(!1)};return(0,r.jsx)(N.l0,{...h,children:(0,r.jsxs)("form",{onSubmit:h.handleSubmit(b),className:"flex flex-col",children:[(0,r.jsx)(N.Wi,{control:h.control,name:"senderBank",render:()=>(0,r.jsx)(N.xJ,{className:"border-t border-gray-200",children:(0,r.jsxs)("div",{className:"payment-transfer_form-item pb-6 pt-5",children:[(0,r.jsxs)("div",{className:"payment-transfer_form-content",children:[(0,r.jsx)(N.lX,{className:"text-14 font-medium text-gray-700",children:"Select Source Bank"}),(0,r.jsx)(N.pf,{className:"text-12 font-normal text-gray-600",children:"Select the bank account you want to transfer funds from"})]}),(0,r.jsxs)("div",{className:"flex w-full flex-col",children:[(0,r.jsx)(N.NI,{children:(0,r.jsx)(j,{accounts:a,setValue:h.setValue,otherStyles:"!w-full"})}),(0,r.jsx)(N.zG,{className:"text-12 text-red-500"})]})]})})}),(0,r.jsx)(N.Wi,{control:h.control,name:"name",render:e=>{let{field:a}=e;return(0,r.jsx)(N.xJ,{className:"border-t border-gray-200",children:(0,r.jsxs)("div",{className:"payment-transfer_form-item pb-6 pt-5",children:[(0,r.jsxs)("div",{className:"payment-transfer_form-content",children:[(0,r.jsx)(N.lX,{className:"text-14 font-medium text-gray-700",children:"Transfer Note (Optional)"}),(0,r.jsx)(N.pf,{className:"text-12 font-normal text-gray-600",children:"Please provide any additional information or instructions related to the transfer"})]}),(0,r.jsxs)("div",{className:"flex w-full flex-col",children:[(0,r.jsx)(N.NI,{children:(0,r.jsx)(g.g,{placeholder:"Write a short note here",className:"input-class",...a})}),(0,r.jsx)(N.zG,{className:"text-12 text-red-500"})]})]})})}}),(0,r.jsxs)("div",{className:"payment-transfer_form-details",children:[(0,r.jsx)("h2",{className:"text-18 font-semibold text-gray-900",children:"Bank account details"}),(0,r.jsx)("p",{className:"text-16 font-normal text-gray-600",children:"Enter the bank account details of the recipient"})]}),(0,r.jsx)(N.Wi,{control:h.control,name:"email",render:e=>{let{field:a}=e;return(0,r.jsx)(N.xJ,{className:"border-t border-gray-200",children:(0,r.jsxs)("div",{className:"payment-transfer_form-item py-5",children:[(0,r.jsx)(N.lX,{className:"text-14 w-full max-w-[280px] font-medium text-gray-700",children:"Recipient's Email Address"}),(0,r.jsxs)("div",{className:"flex w-full flex-col",children:[(0,r.jsx)(N.NI,{children:(0,r.jsx)(v.I,{placeholder:"ex: johndoe@gmail.com",className:"input-class",...a})}),(0,r.jsx)(N.zG,{className:"text-12 text-red-500"})]})]})})}}),(0,r.jsx)(N.Wi,{control:h.control,name:"sharableId",render:e=>{let{field:a}=e;return(0,r.jsx)(N.xJ,{className:"border-t border-gray-200",children:(0,r.jsxs)("div",{className:"payment-transfer_form-item pb-5 pt-6",children:[(0,r.jsx)(N.lX,{className:"text-14 w-full max-w-[280px] font-medium text-gray-700",children:"Receiver's Plaid Sharable Id"}),(0,r.jsxs)("div",{className:"flex w-full flex-col",children:[(0,r.jsx)(N.NI,{children:(0,r.jsx)(v.I,{placeholder:"Enter the public account number",className:"input-class",...a})}),(0,r.jsx)(N.zG,{className:"text-12 text-red-500"})]})]})})}}),(0,r.jsx)(N.Wi,{control:h.control,name:"amount",render:e=>{let{field:a}=e;return(0,r.jsx)(N.xJ,{className:"border-y border-gray-200",children:(0,r.jsxs)("div",{className:"payment-transfer_form-item py-5",children:[(0,r.jsx)(N.lX,{className:"text-14 w-full max-w-[280px] font-medium text-gray-700",children:"Amount"}),(0,r.jsxs)("div",{className:"flex w-full flex-col",children:[(0,r.jsx)(N.NI,{children:(0,r.jsx)(v.I,{placeholder:"ex: 5.00",className:"input-class",...a})}),(0,r.jsx)(N.zG,{className:"text-12 text-red-500"})]})]})})}}),(0,r.jsx)("div",{className:"payment-transfer_btn-box",children:(0,r.jsx)(p.z,{type:"submit",className:"payment-transfer_btn",children:i?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.Z,{size:20,className:"animate-spin"})," \xa0 Sending..."]}):"Transfer Funds"})})]})})}},9869:function(e,a,t){"use strict";t.d(a,{Sn:function(){return d},XD:function(){return n},XP:function(){return i},cM:function(){return o},ok:function(){return c},y1:function(){return l},zB:function(){return s}}),t(3079);var r=t(2119),n=(0,r.$)("96e8039961c618e3ba4be2eca75b43aa5c0a737d");(0,r.$)("0c6abdfc05975ca931c616070f9610a7d4edeb93");var s=(0,r.$)("25721a35d2fe130c1ff474c4de7710f1cce0e709"),l=(0,r.$)("9d8e523dbbfd38ae42b6ca7f1d1d2a26663bad08");(0,r.$)("7856b3d61afb998297a3020bd8745f8dadbfaae3");var c=(0,r.$)("e2eb05fceb805a0cb45baca36f07e6c465fa249a"),d=(0,r.$)("cd7ed88b570f42c314b42295d09cd6a2659196e9");(0,r.$)("46de93f3843589f54b84009dd3fb9d59627f4794");var i=(0,r.$)("923fa2bad5a2a347bf920347118846f8171a0c84");(0,r.$)("76c543ac95374899df976998450aebcafeccc541");var o=(0,r.$)("5ad0e2471a0e8eb9288066e0e7edc8d2d41b8e8a")},3145:function(e,a,t){"use strict";t.d(a,{default:function(){return n.a}});var r=t(8461),n=t.n(r)},8461:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),function(e,a){for(var t in a)Object.defineProperty(e,t,{enumerable:!0,get:a[t]})}(a,{default:function(){return d},getImageProps:function(){return c}});let r=t(7043),n=t(5346),s=t(5878),l=r._(t(5084));function c(e){let{props:a}=(0,n.getImgProps)(e,{defaultLoader:l.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/internet-banking/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,t]of Object.entries(a))void 0===t&&delete a[e];return{props:a}}let d=s.Image}},function(e){e.O(0,[132,878,972,239,514,418,773,971,119,49,744],function(){return e(e.s=9181)}),_N_E=e.O()}]);